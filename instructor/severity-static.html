<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Real-time analysis and forecasting for outbreak analytics with R: Estimación de la severidad del brote</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XZ471458FQ');
    </script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/epiverse-trace/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/epiverse-trace/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/epiverse-trace/favicon-16x16.png"><link rel="manifest" href="../favicons/epiverse-trace/site.webmanifest"><link rel="mask-icon" href="../favicons/epiverse-trace/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav epiverse-trace"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="epiverse-trace-logo" alt="epiverse-trace" src="../assets/images/epiverse-trace-logo.svg"><span class="badge text-bg-danger" style="background-color: #FF4955; border-radius: 5px">
          <abbr title="Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alfa
            </a>
            <span class="visually-hidden">Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de la instructora <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../severity-static.html';">Vista de estudiante</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav epiverse-trace" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="epiverse-trace" src="../assets/images/epiverse-trace-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Real-time analysis and forecasting for outbreak analytics with R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Real-time analysis and forecasting for outbreak analytics with R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Notas de la instructora</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extraer todas las imágenes</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Glossary of Terms: Epiverse-TRACE</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Buscar en la página All In One">Buscar en la página All In One</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Real-time analysis and forecasting for outbreak analytics with R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 66%" class="percentage">
    66%
  </div>
  <div class="progress epiverse-trace">
    <div class="progress-bar epiverse-trace" role="progressbar" style="width: 66%" aria-valuenow="66" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de la instructora
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../severity-static.html">Vista de estudiante</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y agenda</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="delays-access.html">1. Acceder a las distribuciones de retrasos epidemiológicos</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="quantify-transmissibility.html">2. Cuantificar la transmisión</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="delays-functions.html">3. Utilizar distribuciones de retraso en el análisis</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="create-forecast.html">4. Crear una previsión a corto plazo</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Estimación de la severidad del brote
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introducci%C3%B3n">Introducción</a></li>
<li><a href="#fuentes-de-datos-para-la-gravedad-cl%C3%ADnica">Fuentes de datos para la gravedad clínica</a></li>
<li><a href="#cfr-no-ajustado">CFR no ajustado</a></li>
<li><a href="#sesgos-que-afectan-a-la-estimaci%C3%B3n-del-cfr">Sesgos que afectan a la estimación del CFR</a></li>
<li><a href="#cfr-ajustado-al-retraso-temporal">CFR ajustado al retraso temporal</a></li>
<li><a href="#estimaci%C3%B3n-temprana-del-cfr">Estimación temprana del CFR</a></li>
<li><a href="#desaf%C3%ADos">Desafíos</a></li>
<li><a href="#ap%C3%A9ndice">Apéndice</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="superspreading-estimate.html">6. Account for superspreading</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="superspreading-simulate.html">7. Simulate transmission chains</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Notas de la instructora</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extraer todas las imágenes</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Glossary of Terms: Epiverse-TRACE</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Capítulo previo y siguiente"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/create-forecast.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="../instructor/superspreading-estimate.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/create-forecast.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: Crear una previsión
        </a>
        <a class="chapter-link float-end" href="../instructor/superspreading-estimate.html" rel="next">
          Siguiente: Account for...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Estimación de la severidad del brote</h1>
        <p>Última actualización: 2024-11-05 |

        <a href="https://github.com/epiverse-trace/tutorials-middle/edit/main/episodes/severity-static.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 12 minutos</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul><li><p>¿Por qué estimamos la gravedad clínica de una epidemia?</p></li>
<li><p>¿Cómo se puede estimar la probabilidad de muerte (CFR por sus
siglas en inglés: <em>Case Fatality Risk</em>) al principio de una
epidemia en curso?</p></li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul><li><p>Estimar la probabilidad de muerte a partir de datos de casos
agregados utilizando el paquete <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>, <em>case fatality
risk</em> en inglés (riesgo de fatalidad de casos).</p></li>
<li><p>Estima la probabilidad de muerte, ajustando este cálculo teniendo
en cuenta el intervalo entre la aparición de síntomas y la muerte del
paciente utilizando los paquetes <code>{epiparameter}</code> y
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p></li>
<li><p>Estima la probabilidad de muerte de una enfermedad durante la
fase de crecimiento exponencial de una epidemia en expansión utilizando
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p></li>
</ul></div>
</div>
</div>
</div>
</div>
<div id="requisitos-previos" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="requisitos-previos" class="callout-inner">
<h3 class="callout-title">Requisitos previos</h3>
<div class="callout-content">
<p>Este episodio requiere que estés familiarizado con</p>
<p><strong>Ciencia de datos</strong> Programación básica con R</p>
<p><strong>Teoría epidémica</strong>: <a href="reference.html#delaydist">Distribuciones temporales</a>.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a></h2>
<hr class="half-width"><p>Entre las preguntas más comunes en la fase inicial de una epidemia se
incluyen:</p>
<ul><li>¿Cuál es el impacto probable del brote en la salud pública en
términos de gravedad clínica?</li>
<li>¿Cuáles son los grupos más gravemente afectados?</li>
<li>¿Tiene el brote potencial para causar una epidemia de grandes
dimensiones o incluso una pandemia?</li>
</ul><p>Podemos evaluar el potencial pandémico de una epidemia con dos
medidas críticas: la transmisibilidad y la gravedad clínica (<a href="https://www.science.org/doi/full/10.1126/science.1176062" class="external-link">Fraser
et al., 2009</a>, <a href="https://www.cdc.gov/flu/pandemic-resources/national-strategy/severity-assessment-framework-508.html" class="external-link">CDC,
2016</a>).</p>
<figure><img src="../fig/cfr-hhs-scenarios-psaf.png" alt="Escenarios de Planificación de Pandemias del HHS basados en el Marco de Evaluación de la Gravedad de la Pandemia. Éste utiliza una medida combinada de gravedad clínica y transmisibilidad para caracterizar los escenarios de pandemia de gripe. HHS: Departamento de Salud y Servicios Humanos de los Estados Unidos (CDC, 2016)." class="figure mx-auto d-block"><div class="figcaption">Escenarios de Planificación de Pandemias del HHS
basados en el Marco de Evaluación de la Gravedad de la Pandemia. Éste
utiliza una medida combinada de gravedad clínica y transmisibilidad para
caracterizar los escenarios de pandemia de gripe. <strong>HHS</strong>:
Departamento de Salud y Servicios Humanos de los Estados Unidos (<a href="https://www.cdc.gov/flu/pandemic-resources/national-strategy/severity-assessment-framework-508.html" class="external-link">CDC,
2016</a>).</div>
</figure><p>Un enfoque epidemiológico para estimar la gravedad clínica consiste
en cuantificar la probabilidad de muerte (CFR). CFR es la probabilidad
condicional de muerte una vez confirmado el diagnóstico de la
enfermedad, calculada como el número acumulado de muertes por una
enfermedad infecciosa dividido por el número de casos diagnosticados
confirmados. Sin embargo, calcularlo directamente durante el curso de
una epidemia tiende a dar como resultado un CFR sesgado, dado el <a href="reference.html#delaydist">intervalo temporal</a> que ocurre desde
el inicio de lo síntomas hasta la muerte. Este retraso temporal varía
sustancialmente a medida que avanza la epidemia y se estabiliza en las
últimas fases del brote (<a href="https://academic.oup.com/aje/article/162/5/479/82647?login=false#620743" class="external-link">Ghani
et al., 2005</a>).</p>
<figure><img src="../fig/cfr-pone.0006852.g003-fig_c.png" alt="Estimaciones sesgadas de la probabilidad de muerte como función del tiempo (línea gruesa), calculado como el número acumulado de muertes dividido por el número de casos confirmados en el tiempo t. La estimación de la probabilidad de muerte al final de un brote (~30 de mayo) corresponde con la probabilidad de muerte verdadera. La línea continua horizontal y las líneas de puntos muestran el valor esperado y los intervalos de confianza del 95% (95% IC) de la predicción de la probabilidad de muerte ajustada al retraso temporal entre el periodo inicial de síntomas y muerte , utilizando los datos observados hasta el 27 de Marzo de 2003 (Nishiura et al., 2009)" class="figure mx-auto d-block"><div class="figcaption">Estimaciones sesgadas de la probabilidad de
muerte como función del tiempo (línea gruesa), calculado como el número
acumulado de muertes dividido por el número de casos confirmados en el
tiempo <span class="math inline">\(t\)</span>. La estimación de la
probabilidad de muerte al final de un brote (~30 de mayo) corresponde
con la probabilidad de muerte verdadera. La línea continua horizontal y
las líneas de puntos muestran el valor esperado y los intervalos de
confianza del 95% (<span class="math inline">\(95%\)</span> IC) de la
predicción de la probabilidad de muerte ajustada al retraso temporal
entre el periodo inicial de síntomas y muerte , utilizando los datos
observados hasta el 27 de Marzo de 2003 (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>)</div>
</figure><div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Notas de la instructora </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Los periodos de tiempo son relevantes: Periodo 1 – 15 días en los que
el CFR es cero para indicar que no se han notificado muertes; Periodo
del 15 de marzo – 26 de abril en el que el CFR parece aumentar; Periodo
del 30 de abril – 30 de mayo en el que la estimación del CFR se
estabiliza.</p>
</div>
</div>
</div>
</div>
<p>En términos más generales, estimar la gravedad puede ser útil incluso
fuera de un escenario de planificación pandémica y en el contexto de la
salud pública rutinaria. Saber si un brote tiene o tuvo una gravedad
diferente a la del registro histórico puede motivar investigaciones
causales, que podrían ser intrínsecas al agente infeccioso (por ejemplo,
una nueva cepa más grave) o debidas a factores subyacentes en la
población (por ejemplo, inmunidad reducida o factores de morbilidad) (<a href="https://journals.plos.org/plosntds/article?id=10.1371/journal.pntd.0003846" class="external-link">Lipsitch
et al., 2015</a>).</p>
<p>En este tutorial vamos a aprender a utilizar la función
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> para calcular y ajustar una estimación de la
probabilidad de muerte utilizando <a href="reference.html#delaydist">distribuciones temporales</a>
provenientes de <code>{epiparameter}</code> o de otras fuentes,
basándose en los métodos desarrollados por <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a> además, aprenderemos como reimplementar las funciones
de <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> para realizar otras mediciones de la gravedad de
la enfermedad, por ejemplo, el riesgo de fatalidad hospitalaria.</p>
<p>Utilizaremos el operador <code>%&gt;%</code> para conectar funciones,
por lo que es necesario también acceder al
paquete<a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">outbreaks</span><span class="op">)</span></span></code></pre>
</div>
<div id="el-doble-punto" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="el-doble-punto" class="callout-inner">
<h3 class="callout-title">El doble punto</h3>
<div class="callout-content">
<p>El doble punto <code>::</code> en R te permite llamar a una función
específica de un paquete sin cargar todo el paquete en el entorno
actual.</p>
<p>Por ejemplo <code>dplyr::filter(data, condition)</code> utiliza
<code>filter()</code> del paquete <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>.</p>
<p>Esto nos ayuda a recordar las funciones requeridas y evitar usar
funciones que fueron creadas con el mismo nombre pero provienen de otros
paquetes.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="fuentes-de-datos-para-la-gravedad-clínica">Fuentes de datos para la gravedad clínica<a class="anchor" aria-label="anchor" href="#fuentes-de-datos-para-la-gravedad-cl%C3%ADnica"></a></h2>
<hr class="half-width"><p>¿Qué fuentes de datos podemos utilizar para estimar la gravedad
clínica de un brote epidémico? <a href="https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30243-7/fulltext" class="external-link">Verity
et al., 2020</a> resume el espectro de casos de COVID-19:</p>
<figure><img src="../fig/cfr-spectrum-cases-covid19.jpg" alt="Espectro de casos de COVID-19. La probabilidad de muerte pretende estimar la proporción de muertes entre los casos confirmados en una epidemia. (Verity et al., 2020)" class="figure mx-auto d-block"><div class="figcaption">Espectro de casos de COVID-19. La probabilidad
de muerte pretende estimar la proporción de muertes entre los casos
confirmados en una epidemia. (<a href="https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30243-7/fulltext#gr1" class="external-link">Verity
et al., 2020</a>)</div>
</figure><ul><li>En la cúspide de la pirámide, los que cumplían los criterios de caso
de la OMS para <strong>grave</strong> o críticos, identificados en el
ámbito hospitalario, presentando una neumonía vírica atípica. Estos
casos se habrían identificado en China continental y entre los
categorizados internacionalmente como de transmisión local.</li>
<li>Es probable que haya muchos más casos <strong>sintomáticos</strong>
(es decir, con fiebre, tos o mialgia) pero no requiriesen
hospitalización. Estos casos se habrían identificado mediante el rastro
de casos potenciales en vuelos internacionales a zonas de alto riesgo y
mediante el rastreo de los contactos de los casos confirmados, o a
través de vigilancia pasiva de otras enfermedades infecciosas
respiratorias en la población.</li>
<li>La parte inferior de la pirámide representa enfermedad
<strong>leve</strong> (y posiblemente <strong>asintomática</strong>).
Estos casos podrían identificarse mediante el rastreo de contactos,
mediante pruebas serológicas.</li>
</ul></section><section><h2 class="section-heading" id="cfr-no-ajustado">CFR no ajustado<a class="anchor" aria-label="anchor" href="#cfr-no-ajustado"></a></h2>
<hr class="half-width"><p>Medimos la gravedad de la enfermedad en términos de
riesgo/probabilidad de muerte (CFR). CFR se interpreta como la
probabilidad condicional de muerte dado un diagnóstico confirmado,
calculada como el número acumulado de muertes <span class="math inline">\(D_{t}\)</span> sobre el número acumulado de casos
confirmados <span class="math inline">\(C_{t}\)</span> en un momento
determinado <span class="math inline">\(t\)</span>. Podemos referirnos
al <em>CFR sesgado</em> (<span class="math inline">\(b_{t}\)</span>):</p>
<p><span class="math display">\[ b_{t} =  \frac{D_{t}}{C_{t}}
\]</span></p>
<p>Este cálculo es <em>sesgado</em> porque genera una subestimación del
CFR real, debido al retraso temporal desde el inicio de los síntomas
hasta la muerte, que sólo se estabiliza en las últimas fases del
brote.</p>
<!-- ¿añadir aquí la llamada sobre ratio o riesgo?  -->
<!-- https://github.com/epiverse-trace/cfr/issues/130 -->
<p>Para calcular el CFR de forma directa y sin ajustar el retraso
temporal entre la aparición de síntomas y la muerte del paciente
(conocida como probabilidad de muerte “naive”), el paquete
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> requiere un una base de datos (dataframe) que
contenga las siguientes tres columnas:</p>
<ul><li><code>date</code></li>
<li><code>cases</code></li>
<li><code>deaths</code></li>
</ul><p>Exploremos la base de datos <code>ebola1976</code> incluido en {cfr}
que procede del primer brote de ébola en lo que entonces se llamaba
Zaire (ahora República Democrática del Congo) en 1976, analizado por
Camacho et al. (2014).</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cargamos la base de datos Ebola 1976, incluida en el paquete {cfr}</span></span>
<span><span class="fu">data</span><span class="op">(</span><span class="st">"ebola1976"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Asumiendo que solo tenemos datos para los primeros 30 días del brote</span></span>
<span><span class="va">ebola1976</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 30 × 3
   date       cases deaths
   &lt;date&gt;     &lt;int&gt;  &lt;int&gt;
 1 1976-08-25     1      0
 2 1976-08-26     0      0
 3 1976-08-27     0      0
 4 1976-08-28     0      0
 5 1976-08-29     0      0
 6 1976-08-30     0      0
 7 1976-08-31     0      0
 8 1976-09-01     1      0
 9 1976-09-02     1      0
10 1976-09-03     1      0
# ℹ 20 more rows</code></pre>
</div>
<div id="necesitamos-datos-de-incidencia-agregados" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="necesitamos-datos-de-incidencia-agregados" class="callout-inner">
<h3 class="callout-title">Necesitamos datos de incidencia agregados</h3>
<div class="callout-content">
<p><a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> lee datos de incidencia <strong>agregados</strong>
por día</p>
<!-- Similar al paquete `{EpiNow2}` con la diferencia de que para `{cfr}` necesitamos una columna más llamada `deaths`. -->
<p>Estos deben ser <strong>agregados</strong> por día, es decir, cada
fila de la base de datos contiene el número diario de casos y muertes
notificadas. También deben incluirse aquellos días que tengan valores
nulos o ausentes, de forma similar a los datos de series temporales.</p>
<p><a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> requiere datos diarios y no puede considerar otras
unidades temporales de agregación, como semanas o meses.</p>
<!-- sugiere formas de tratar los datos semanales de entrada brutos -->
<!-- https://github.com/epiverse-trace/cfr/issues/117 -->
</div>
</div>
</div>
<p>Utilizando la función <code>cfr_static()</code> directamente,
calculamos la probabilidad de muerte sin ajustar:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cálculo de la probabilidad de muerte sin ajustar durante los primeros 30 días</span></span>
<span><span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ebola1976</span> <span class="op">%&gt;%</span> <span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1         0.4740741    0.3875497     0.5617606</code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Descarga el archivo <a href="../data/sarscov2_cases_deaths.csv">sarscov2_casos_defunciones.csv</a>
y léelo en R.</p>
<p>Estima la probabilidad de muerte sin ajustar.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Dar una pista </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Comprueba el formato de los datos introducidos.</p>
<ul><li>¿Contiene datos diarios?</li>
<li>¿Los nombres de las columnas son los requeridos por
<code>cfr_static()</code>?</li>
<li>¿Cómo se cambian los nombres de las columnas de una base de datos
(dataframe) en R?</li>
</ul></div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Mostrar la solución </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Leemos los datos introducidos mediante
<code>readr::read_csv()</code>. Esta función reconoce que la columna
<code>date</code> tiene el formato correcto,<code>&lt;date&gt;</code>,
que corresponde a fechas.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># lee la base de datos</span></span>
<span><span class="co"># por ejemplo, si la ruta al archivo es data/raw-data/ebola_cases.csv :</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw-data"</span>, <span class="st">"sarscov2_cases_deaths.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inspect data</span></span>
<span><span class="va">sarscov2_input</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 93 × 3
   date       cases_jpn deaths_jpn
   &lt;date&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 2020-01-20         1          0
 2 2020-01-21         1          0
 3 2020-01-22         0          0
 4 2020-01-23         1          0
 5 2020-01-24         1          0
 6 2020-01-25         3          0
 7 2020-01-26         3          0
 8 2020-01-27         4          0
 9 2020-01-28         6          0
10 2020-01-29         7          0
# ℹ 83 more rows</code></pre>
</div>
<p>Podemos utilizar <code>dplyr::rename()</code> para cambiar los
nombres de las columnas de este archivo y adaptarlos a los requeridos
por <code>cfr_static()</code>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cambio de nombre de las columnas en base al formato requerido por `cfr_static`</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">rename</span><span class="op">(</span></span>
<span>    cases <span class="op">=</span> <span class="va">cases_jpn</span>,</span>
<span>    deaths <span class="op">=</span> <span class="va">deaths_jpn</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1        0.01895208   0.01828832    0.01963342</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="sesgos-que-afectan-a-la-estimación-del-cfr">Sesgos que afectan a la estimación del CFR<a class="anchor" aria-label="anchor" href="#sesgos-que-afectan-a-la-estimaci%C3%B3n-del-cfr"></a></h2>
<hr class="half-width"><div id="dos-sesgos-que-afectan-a-la-estimación-del-cfr" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="dos-sesgos-que-afectan-a-la-estimación-del-cfr" class="callout-inner">
<h3 class="callout-title">Dos sesgos que afectan a la estimación del CFR</h3>
<div class="callout-content">
<p><a href="https://journals.plos.org/plosntds/article?id=10.1371/journal.pntd.0003846" class="external-link">Lipsitch
et al., 2015</a> describen dos posibles sesgos que pueden afectar a la
estimación de la probabilidad de muerte (y sus posibles soluciones):</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> 1. Sesgo por la identificación predominante de los casos más graves </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Para enfermedades con un <em>espectro</em> de presentaciones
clínicas, es más probable que los casos de mayor gravedad sean
reconocidos y notificados a las autoridades de salud pública y se
registran en las bases de datos de vigilancia, ya que las personas con
síntomas graves son las que suelen buscar atención médica y acuden al
centro de salud/hospital.</p>
<p>Por lo tanto, el CFR será normalmente más elevada entre <em>los casos
detectados</em> que entre toda la población de casos, dado que esta
última puede incluir individuos con presentaciones leves, subclínicas, y
(según algunas definiciones de “caso”) asintomáticas.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> 2. Sesgo debido al retraso en la notificación de la defunción </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>En tiempo real durante una epidemia, suele haber un retraso temporal
entre el momento en que alguien muere y el momento en que se notifica su
muerte a la autoridad correspondiente. Por lo tanto, la lista de casos
en tiempo real incluye a personas que morirán a causa de la enfermedad
en el futuro, pero que aún siguen vivas, o que han muerto, pero cuya
muerte no se ha notificado aún. Así pues, dividir el número acumulado de
muertes notificadas por el número acumulado de casos notificados en un
momento concreto durante un brote epidémico subestimará el CFR
verdadera.</p>
<p>Los determinantes clave de la magnitud del sesgo son la <em>tasa de
crecimiento</em> de la epidemia y la <em>distribución</em> del intervalo
de tiempo desde la notificación del caso hasta la notificación de la
defunción. Cuanto más largos sea este intervalo de tiempo y mayor sea la
tasa de crecimiento, mayor será el sesgo.</p>
<p>En este episodio del tutorial, vamos a centrarnos en las soluciones
para hacer frente a este sesgo utilizando el paquete de
R<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> ¡!</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Caso de estudio: Gripe A (H1N1), México, 2009 </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Mejorar la estimación de la probabilidad de muerte, ajustando su
cálculo al retraso temporal entre notificación de casos y muerte es
crucial para determinar la gravedad de la enfermedad, adaptar la
intensidad y el tipo de intervenciones de salud pública y asesorar a la
población.</p>
<p>En 2009, durante el virus de la gripe porcina, Gripe A (H1N1) en
México, la estimación temprana de la probabilidad de muerte fue sesgada.
Los informes iniciales del gobierno de México sugerían una infección
virulenta, mientras que, en otros países, el mismo virus se percibía
como leve (<a href="https://content.time.com/time/health/article/0,8599,1894534,00.html" class="external-link">TIME,
2009</a>).</p>
<p>En EE.UU. y Canadá, no se atribuyó ninguna muerte al virus en los
diez primeros días tras la declaración de emergencia de salud pública
por parte de la Organización Mundial de la Salud.</p>
<p><a href="https://www.science.org/doi/full/10.1126/science.1176062" class="external-link">Fraser
et al., 2009</a> reinterpretó los datos evaluando los sesgos y
obteniendo una gravedad clínica inferior a la de la pandemia de gripe de
1918, pero comparable a la observada en la pandemia de 1957.</p>
</div>
</div>
</div>
</div>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Notas de la instructora </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" aria-labelledby="headingInstructor2" data-bs-parent="#accordionInstructor2">
<div class="accordion-body">
<p>Podemos mostrar este sesgo utilizando la función <a href="https://epiverse-trace.github.io/cfr/articles/cfr.html#concept-how-reporting-delays-bias-cfr-estimates" class="external-link">concepto
descrito en esta viñeta del paquete<code>{cfr}</code></a>.</p>
<!-- ¿crear código y luego un .gif? -->
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="cfr-ajustado-al-retraso-temporal">CFR ajustado al retraso temporal<a class="anchor" aria-label="anchor" href="#cfr-ajustado-al-retraso-temporal"></a></h2>
<hr class="half-width"><p><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al, 2009</a> desarrollaron un método que tiene en cuenta la
<strong>distribución temporal</strong> desde el inicio de los síntomas
hasta la muerte.</p>
<p>Los brotes en tiempo real pueden tener un número de muertes
insuficiente para determinar la distribución temporal entre el inicio de
síntomas y la muerte. Por tanto, podemos estimar la <em>distribución
temporal</em> en brotes históricos o utilizar las distribuciones
incluidas en paquetes de R como <code>{epiparameter}</code> o
<code>{epireview}</code> que los recogen de la literatura científica
publicada. Para una guía paso a paso, lee el episodio tutorial sobre
cómo <a href="https://epiverse-trace.github.io/tutorials-early/delays-reuse.html" class="external-link">acceder
a distribuciones temporales epidemiológicas</a>.</p>
<p>Utilicemos <code>{epiparameter}</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get delay distribution</span></span>
<span><span class="va">onset_to_death_ebola</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epidist_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"Ebola"</span>,</span>
<span>    epi_dist <span class="op">=</span> <span class="st">"onset_to_death"</span>,</span>
<span>    single_epidist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot &lt;epidist&gt; object</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">onset_to_death_ebola</span>, day_range <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">40</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/severity-static-rendered-unnamed-chunk-9-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Para calcular el CFR ajustado, podemos utilizar la función
<code>cfr_static()</code>, a través del argumento
<code>delay_density</code>.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the delay-adjusted CFR</span></span>
<span><span class="co"># for the first 30 days</span></span>
<span><span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ebola1976</span> <span class="op">%&gt;%</span> <span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>  delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">onset_to_death_ebola</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Total cases = 135 and p = 0.955: using Normal approximation to binomial likelihood.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1            0.9717       0.8201        0.9866</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Total cases = 135 and p = 0.955: using Normal approximation to binomial likelihood.</code></pre>
</div>
<p>La probabilidad de muerte ajustada indicó que la gravedad de la
enfermedad <em>al final del brote</em> o con el <em>últimos datos
disponibles en ese momento</em> es 0.9717 con un intervalo de confianza
del 95% entre 0.8201 y 0.9866, con un valor superior al obtenido a
través del cálculo directo sin ajustar.</p>
<div id="utiliza-la-clase-epidist" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="utiliza-la-clase-epidist" class="callout-inner">
<h3 class="callout-title">Utiliza la clase epidist</h3>
<div class="callout-content">
<p>Cuando utilices una clase <code>&lt;epidist&gt;</code> puedes
utilizar esta expresión como plantilla:</p>
<p><code>function(x) density(&lt;EPIDIST_OBJECT&gt;, x)</code></p>
<p>Para distribuciones cuyos parámetros no estén disponibles en
<code>{epiparameter}</code>, te proponemos dos alternativas:</p>
<ul><li><p>Crear un objeto <code>&lt;epidist&gt;</code>, que puede ser
utilizado con otros paquetes de R para análisis de brotes. Lee la <a href="https://epiverse-trace.github.io/epiparameter/reference/epidist.html" class="external-link">documentación
de referencia de <code>epiparameter::epidist()</code></a> o</p></li>
<li><p>Lee la viñeta para <a href="https://epiverse-trace.github.io/cfr/articles/delay_distributions.html" class="external-link">una
introducción al trabajo con distribuciones temporales</a>.</p></li>
</ul></div>
</div>
</div>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Utiliza el mismo archivo del reto anterior (<a href="../data/sarscov2_cases_deaths.csv">sarscov2_casos_muertes.csv</a>).</p>
<p>Estima el CFR ajustado al retraso temporal utilizando la distribución
apropiada y</p>
<ul><li>¡Compara los valores del CFR ajustado y sin ajuste temporal!</li>
</ul></div>
</div>
</div>
<div id="accordionHint2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint2" aria-expanded="false" aria-controls="collapseHint2">
  <h4 class="accordion-header" id="headingHint2"> Dar una pista </h4>
</button>
<div id="collapseHint2" class="accordion-collapse collapse" aria-labelledby="headingHint2" data-bs-parent="#accordionHint2">
<div class="accordion-body">
<ul><li>Encuentra el <code>&lt;epidist&gt;</code> ¡apropiado!</li>
</ul></div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Mostrar la solución </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Utilizamos <code>{epiparameter}</code> para acceder a una
distribución temporal para los datos de incidencia agregados del
SARS-CoV-2:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sarscov2_delay</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epidist_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_dist <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>    single_epidist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Leemos el archivo de datos mediante <code>readr::read_csv()</code>.
Esta función reconoce que la columna <code>date</code> es de la clase
<code>&lt;date&gt;</code>, es decir, una fecha.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read data</span></span>
<span><span class="co"># e.g.: if path to file is data/raw-data/ebola_cases.csv then:</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw-data"</span>, <span class="st">"sarscov2_cases_deaths.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inspect data</span></span>
<span><span class="va">sarscov2_input</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 93 × 3
   date       cases_jpn deaths_jpn
   &lt;date&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 2020-01-20         1          0
 2 2020-01-21         1          0
 3 2020-01-22         0          0
 4 2020-01-23         1          0
 5 2020-01-24         1          0
 6 2020-01-25         3          0
 7 2020-01-26         3          0
 8 2020-01-27         4          0
 9 2020-01-28         6          0
10 2020-01-29         7          0
# ℹ 83 more rows</code></pre>
</div>
<p>Podemos utilizar <code>dplyr::rename()</code> para cambiar los
nombres de las columnas del archivo a los requeridos
por<code>cfr_static()</code>.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Rename before Estimate naive CFR</span></span>
<span><span class="va">sarscov2_input</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">rename</span><span class="op">(</span></span>
<span>    cases <span class="op">=</span> <span class="va">cases_jpn</span>,</span>
<span>    deaths <span class="op">=</span> <span class="va">deaths_jpn</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span>delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">sarscov2_delay</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Total cases = 159402 and p = 0.0734: using Normal approximation to binomial likelihood.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1             0.047       0.0221        0.2931</code></pre>
</div>
<p>Interpreta las diferencias entre las estimaciones de la probabilidad
de muerte sin ajustar y con ajuste temporal al intervalo entre la
aparición inicial de síntomas en los casos y su muerte.</p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> ¿Cuándo utilizar distribuciones discretas? </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>En <code>cfr_static()</code> y toda la familia de funciones en
<code>cfr_*()</code>, la opción más adecuada son las distribuciones
<strong>discretas</strong>. Esto se debe a que trabajaremos con datos
diarios de casos y defunciones.</p>
<p>Podemos suponer que la función de densidad de probabilidad (PDF) de
una distribución <em>continua</em> es equivalente a la función de masa
de probabilidad (PMF) de la distribución <em>discreta</em>
correspondiente.</p>
<p>Sin embargo, esta suposición puede no ser adecuada en el caso de
distribuciones con picos pronunciados y baja varianza, en las que los
valores se concentran alrededor de la tendencia central. En tales casos,
se espera que la disparidad media entre la PDF y la PMF sea más
pronunciada en comparación con las distribuciones más dispersas. Una
forma de abordar esto es discretizar la distribución continua. Esto lo
podemos hacer en R, si discretizamos los objetos
<code>&lt;epidist&gt;</code>, utilizando la función
<code>epiparameter::discretise()</code>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> ¿Cómo funciona {cfr}? </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>Para ajustar la probabilidad de muerte, <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a> utilizan los datos de incidencia de casos y muertes
para estimar el número de casos con resultados conocidos:</p>
<p><span class="math display">\[
u_t = \dfrac{\sum_{i = 0}^t
\sum_{j = 0}^\infty c_{i - j} f_{j}}{\sum_{i = 0} c_i},
\]</span></p>
<p>donde</p>
<ul><li>
<span class="math inline">\(c_{t}\)</span> es la incidencia diaria
de casos en el momento <span class="math inline">\(t\)</span>,</li>
<li>
<span class="math inline">\(f_{t}\)</span> es el valor de la función
de masa de probabilidad (PMF) de la <strong>distribución
temporal</strong> entre el inicio de síntomas y la muerte, y</li>
<li>
<span class="math inline">\(u_{t}\)</span> representa el factor de
subestimación de los resultados conocidos.</li>
</ul><p><span class="math inline">\(u_{t}\)</span> se utiliza para
<strong>escalar</strong> el valor del número acumulado de casos en el
denominador en el cálculo del CFR. Se calcula internamente con la
función <a href="https://epiverse-trace.github.io/cfr/reference/estimate_outcomes.html" class="external-link"><code>estimate_outcomes()</code></a></p>
<p>El estimador para la probabilidad de muerte puede expresarse
como:</p>
<p><span class="math display">\[p_{t} = \frac{b_{t}}{u_{t}}\]</span></p>
<p>donde <span class="math inline">\(p_{t}\)</span> es la proporción
realizada de casos confirmados que morirán a causa de la infección (o el
CFR real), y <span class="math inline">\(b_{t}\)</span> es la estimación
cruda y sesgada del CFR.</p>
<p>A partir de esta última ecuación, observamos que el CFR no sesgada
<span class="math inline">\(p_{t}\)</span> es mayor que el CFR sesgada
<span class="math inline">\(b_{t}\)</span> porque en <span class="math inline">\(u_{t}\)</span> el numerador es menor que el
denominador (observa que <span class="math inline">\(f_{t}\)</span> es
la distribución de probabilidad del <em>retraso temporal</em> entre
síntomas y muerte). Por tanto, nos referimos a <span class="math inline">\(b_{t}\)</span> como el estimador sesgado de la
probabilidad de muerte.</p>
<p>Cuando observamos todo el curso de una epidemia (desde <span class="math inline">\(t \rightarrow \infty\)</span>), <span class="math inline">\(u_{t}\)</span> tiende a 1, lo que hace que <span class="math inline">\(b_{t}\)</span> tiende a <span class="math inline">\(p_{t}\)</span> y se convierta en un estimador no
sesgado (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>).</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="estimación-temprana-del-cfr">Estimación temprana del CFR<a class="anchor" aria-label="anchor" href="#estimaci%C3%B3n-temprana-del-cfr"></a></h2>
<hr class="half-width"><p>En el reto anterior, descubrimos que el valor de la probabilidad de
muerte ajustada y no ajustada son diferentes.</p>
<p>La CFR sin ajustar es útil para obtener una estimación global de la
gravedad del brote. Una vez que el brote haya finalizado o haya
progresado de forma que se notifiquen más muertes, el CFR estimada es
entonces <em>más cercana a</em> el CFR “verdadera” o no sesgada.</p>
<p>Por otra parte, el CFR <strong>ajustada</strong> puede ser utilizada
para estimar la gravedad de una enfermedad infecciosa emergente de una
forma más temprana durante una epidemia.</p>
<p>Podemos explorar la <em>CFR ajustado al retraso temporal</em> de
forma temprana utilizando la función <code>cfr_rolling()</code></p>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><code>cfr_rolling()</code> es una función que calcula automáticamente
el CFR en cada día del brote con los datos disponibles hasta ese día, lo
que ahorra tiempo al usuario, ya que no hace falta calcular este
parámetro manualmente para cada momento.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the rolling daily naive CFR</span></span>
<span><span class="co"># for all the 73 days in the Ebola dataset</span></span>
<span><span class="va">rolling_cfr_naive</span> <span class="op">&lt;-</span> <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_rolling</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ebola1976</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`cfr_rolling()` is a convenience function to help understand how additional data influences the overall (static) severity. Use `cfr_time_varying()` instead to estimate severity changes over the course of the outbreak.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu">tail</span><span class="op">(</span><span class="va">rolling_cfr_naive</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date severity_estimate severity_low severity_high
68 1976-10-31         0.9510204    0.9160061     0.9744387
69 1976-11-01         0.9510204    0.9160061     0.9744387
70 1976-11-02         0.9510204    0.9160061     0.9744387
71 1976-11-03         0.9510204    0.9160061     0.9744387
72 1976-11-04         0.9510204    0.9160061     0.9744387
73 1976-11-05         0.9551020    0.9210866     0.9773771</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the rolling daily delay-adjusted CFR</span></span>
<span><span class="co"># for all the 73 days in the Ebola dataset</span></span>
<span><span class="va">rolling_cfr_adjusted</span> <span class="op">&lt;-</span> <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_rolling</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ebola1976</span>,</span>
<span>  delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">onset_to_death_ebola</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`cfr_rolling()` is a convenience function to help understand how additional data influences the overall (static) severity. Use `cfr_time_varying()` instead to estimate severity changes over the course of the outbreak.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Some daily ratios of total deaths to total cases with known outcome are below 0.01%: some CFR estimates may be unreliable.FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu">tail</span><span class="op">(</span><span class="va">rolling_cfr_adjusted</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date severity_estimate severity_low severity_high
68 1976-10-31            0.9843       0.9003        0.9925
69 1976-11-01            0.9843       0.9003        0.9925
70 1976-11-02            0.9817       0.8838        0.9913
71 1976-11-03            0.9817       0.8838        0.9913
72 1976-11-04            0.9817       0.8838        0.9913
73 1976-11-05            0.9818       0.8843        0.9913</code></pre>
</div>
<p>Con <code>utils::tail()</code> mostramos como los últimos valores
estimados del CFR ajustado y sin ajustar tienen rangos superpuestos de
intervalos de confianza del 95%.</p>
<p>Ahora, visualicemos ambos resultados en una serie temporal. ¿Cómo se
comportarían en tiempo real las estimaciones de CFR ajustados y sin
ajustar?</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the latest delay-adjusted CFR</span></span>
<span><span class="va">rolling_cfr_adjusted_end</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">rolling_cfr_adjusted</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice_tail</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># bind by rows both output data frames</span></span>
<span><span class="fu">bind_rows</span><span class="op">(</span></span>
<span>  <span class="va">rolling_cfr_naive</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"naive"</span><span class="op">)</span>,</span>
<span>  <span class="va">rolling_cfr_adjusted</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"adjusted"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># visualise both adjusted and unadjusted rolling estimates</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_ribbon</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span></span>
<span>      <span class="va">date</span>,</span>
<span>      ymin <span class="op">=</span> <span class="va">severity_low</span>,</span>
<span>      ymax <span class="op">=</span> <span class="va">severity_high</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">method</span></span>
<span>    <span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span><span class="va">date</span>, <span class="va">severity_estimate</span>, colour <span class="op">=</span> <span class="va">method</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">rolling_cfr_adjusted_end</span>,</span>
<span>    <span class="fu">aes</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="va">severity_estimate</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">rolling_cfr_adjusted_end</span>,</span>
<span>    <span class="fu">aes</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="va">severity_low</span><span class="op">)</span>,</span>
<span>    lty <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">rolling_cfr_adjusted_end</span>,</span>
<span>    <span class="fu">aes</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="va">severity_high</span><span class="op">)</span>,</span>
<span>    lty <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/severity-static-rendered-unnamed-chunk-19-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>La línea horizontal representa el CFR ajustado al retraso temporal,
estimada al final del brote. La línea punteada significa que la
estimación tiene un intervalo de confianza del 95% (IC 95%).</p>
<p><strong>Observa</strong> que este cálculo ajustado al retraso
temporal entre síntomas y muerte es especialmente útil cuando los únicos
datos disponibles son <em>curvas epidémica de casos confirmados</em> (es
decir, cuando no se dispone de datos individuales, especialmente durante
la fase inicial de la epidemia). Cuando hay pocas muertes o ninguna, hay
que hacer una suposición para la <em>distribución temporal</em> desde la
aparición de síntomas hasta la muerte, por ejemplo, a partir de la
literatura basada en brotes anteriores. <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a> representan esto en las figuras con datos del brote de
SARS en Hong Kong, 2003.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Caso de estudio: Brote de SARS, Hong Kong, 2003 </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>Las figuras A y B muestran el número acumulado de casos y muertes por
SRAS, y la figura C muestra las estimaciones observadas (sesgadas) del
CFR en función del tiempo, es decir, el número acumulado de muertes
sobre casos en el momento <span class="math inline">\(t\)</span>. Debido
al retraso temporal desde el inicio de los síntomas hasta la muerte, la
estimación sesgada de la probabilidad de muerte en el tiempo <span class="math inline">\(t\)</span> subestima el valor en las etapas
finales del brote (es decir, 302/1755 = 17,2%).</p>
<figure><img src="../fig/cfr-pone.0006852.g003-fig_abc.png" alt="Riesgo observado (sesgado) de muerte confirmada del síndrome respiratorio agudo grave (SRAS) en Hong Kong, 2003. (Nishiura et al., 2009)" class="figure mx-auto d-block"><div class="figcaption">Riesgo observado (sesgado) de muerte confirmada
del síndrome respiratorio agudo grave (SRAS) en Hong Kong, 2003. (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>)</div>
</figure><p>No obstante, incluso utilizando únicamente los datos observados para
el periodo comprendido entre el 19 de marzo y el 2 de abril,
<code>cfr_static()</code> puede obtener una predicción adecuada (Figura
D), por ejemplo, el CFR ajustado al retraso en el 27 de marzo es del
18,1% (IC del 95%: 10,5, 28,1). Se observa una sobreestimación en las
fases muy tempranas de la epidemia, pero los límites de confianza del
95% en las fases posteriores incluyen el CFR realizado (es decir, 17,2
%).</p>
<figure><img src="../fig/cfr-pone.0006852.g003-fig_d.png" alt="Determinación temprana del riesgo de muerte confirmada ajustado al retraso del síndrome respiratorio agudo grave (SRAS) en Hong Kong, 2003. (Nishiura et al., 2009)" class="figure mx-auto d-block"><div class="figcaption">Determinación temprana del riesgo de muerte
confirmada ajustado al retraso del síndrome respiratorio agudo grave
(SRAS) en Hong Kong, 2003. (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>)</div>
</figure></div>
</div>
</div>
</div>
<div id="interpretar-la-estimación-del-cfr-en-la-fase-inicial-del-brote" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="interpretar-la-estimación-del-cfr-en-la-fase-inicial-del-brote" class="callout-inner">
<h3 class="callout-title">Interpretar la estimación del CFR en la fase inicial del brote</h3>
<div class="callout-content">
<p>Basándote en la figura anterior:</p>
<ul><li>¿Cuántos días hay entre el inicio del brote y la fecha en la que el
intervalo de confianza de la <em>CFR ajustado</em> se cruza con el
intervalo de confianza de la <em>CFR sin ajustar</em>? ¿Los intervalos
se cruzan con el CFR estimada al final del brote?</li>
</ul><p>Discusión:</p>
<ul><li>¿Cuáles son las implicaciones para la política de salud pública de
tener una <em>CFR ajustado por retraso temporal</em>?</li>
</ul></div>
</div>
</div>
<div id="accordionHint3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint3" aria-expanded="false" aria-controls="collapseHint3">
  <h4 class="accordion-header" id="headingHint3"> Dar una pista </h4>
</button>
<div id="collapseHint3" class="accordion-collapse collapse" aria-labelledby="headingHint3" data-bs-parent="#accordionHint3">
<div class="accordion-body">
<p>Podemos utilizar la inspección visual o el análisis de los marcos de
datos de salida.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Mostrar la solución </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Hay casi un mes de diferencia.</p>
<p>Nótese que la estimación tiene una incertidumbre considerable al
principio de la serie temporal. Al cabo de dos semanas, el CFR ajustado
se aproxima a la estimación global del CFR al final del brote.</p>
<p>¿Es este patrón similar al de otros brotes? Podemos utilizar los
conjuntos de datos de los retos de este episodio. ¡Te invitamos a
averiguarlo!</p>
</div>
</div>
</div>
</div>
<div id="lista-de-verificación" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="lista-de-verificación" class="callout-inner">
<h3 class="callout-title">Lista de verificación</h3>
<div class="callout-content">
<p>Con <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> estimamos el CFR como la proporción de muertes
entre <strong>confirmadas</strong> confirmados.</p>
<p>Utilizando sólo el número de casos <strong>confirmados</strong> está
claro que se pasarán por alto todos los casos que no busquen tratamiento
médico o no sean notificados, así como todos los casos asintomáticos.
Esto significa que la estimación del CFR es superior a la proporción de
muertes entre los infectados.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> ¿Por qué difieren el CFR sin ajustar y la ajustada al retraso temporal? </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p><a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> tiene como objetivo obtener un estimador insesgado
“mucho antes” de observar el curso completo del brote. Para ello
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> utiliza el factor de subestimación <span class="math inline">\(u_{t}\)</span> para estimar el CFR sin sesgo <span class="math inline">\(p_{t}\)</span> , utilizando métodos de máxima
verosimilitud, dado el <em>proceso de muestreo</em> definido por <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0006852" class="external-link">Nishiura
et al., 2009</a>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> ¿Qué es el proceso de muestreo? </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<figure><img src="../fig/cfr-pone.0006852.g001.png" alt="La población de casos confirmados y el proceso de muestreo para estimar el CFR sin sesgo durante el transcurso de un brote. (Nishiura et al., 2009)" class="figure mx-auto d-block"><div class="figcaption">La población de casos confirmados y el proceso
de muestreo para estimar el CFR sin sesgo durante el transcurso de un
brote. (<a href="https://doi.org/10.1371/journal.pone.0006852.g001" class="external-link">Nishiura et
al., 2009</a>)</div>
</figure><p>En <em>datos agregados de incidencia</em> en el momento <span class="math inline">\(t\)</span> conocemos el número acumulado de casos
confirmados y muertes, <span class="math inline">\(C_{t}\)</span> y
<span class="math inline">\(D_{t}\)</span> y deseamos estimar el CFR sin
sesgo <span class="math inline">\(\pi\)</span> mediante el factor de
subestimación <span class="math inline">\(u_{t}\)</span>.</p>
<p>Si conociéramos el factor de subestimación <span class="math inline">\(u_{t}\)</span> podríamos especificar el tamaño de
la población de casos confirmados que ya no corren riesgo (<span class="math inline">\(u_{t}C_{t}\)</span>, <strong>sombreado</strong>),
aunque no sabemos qué individuos supervivientes pertenecen a este grupo.
Una proporción <span class="math inline">\(\pi\)</span> de los del grupo
de casos aún en riesgo (tamaño <span class="math inline">\((1-
u_{t})C_{t}\)</span>, <strong>sin sombrear</strong>) se espera que
muera.</p>
<p>Ya que cada caso que deja de estar en riesgo tiene una probabilidad
independiente de morir, <span class="math inline">\(\pi\)</span> el
número de muertes, <span class="math inline">\(D_{t}\)</span> es una
muestra de una distribución binomial con tamaño de muestra <span class="math inline">\(u_{t}C_{t}\)</span> y probabilidad de morir <span class="math inline">\(p_{t}\)</span> = <span class="math inline">\(\pi\)</span>.</p>
<p>Esto se representa mediante la siguiente función de verosimilitud
para obtener la estimación de máxima verosimilitud del CFR sin sesgo
<span class="math inline">\(p_{t}\)</span> = <span class="math inline">\(\pi\)</span>:</p>
<p><span class="math display">\[
{\sf L}(\pi | C_{t},D_{t},u_{t}) = \log{\dbinom{u_{t}C_{t}}{D_{t}}} +
D_{t} \log{\pi} +
(u_{t}C_{t} - D_{t})\log{(1 - \pi)},
\]</span></p>
<p>Esta estimación la realiza la función interna
<code>?cfr:::estimate_severity()</code>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9"> Limitaciones </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" aria-labelledby="headingSolution9" data-bs-parent="#accordionSolution9">
<div class="accordion-body">
<ul><li>La CFR ajustado al retraso temporal no aborda todas las fuentes de
error en los datos, como el infradiagnóstico de individuos
infectados.</li>
</ul></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="desafíos">Desafíos<a class="anchor" aria-label="anchor" href="#desaf%C3%ADos"></a></h2>
<hr class="half-width"><div id="los-datos-agregados-difieren-de-los-listados-de-casos-individuales" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="los-datos-agregados-difieren-de-los-listados-de-casos-individuales" class="callout-inner">
<h3 class="callout-title">Los datos agregados difieren de los listados de casos individuales</h3>
<div class="callout-content">
<p>Los datos de incidencia <em>agregados</em> difieren de
<strong>lista</strong> en los que cada observación contiene datos a
nivel individual.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">outbreaks</span><span class="fu">::</span><span class="va">ebola_sierraleone_2014</span> <span class="op">%&gt;%</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 11,903 × 8
      id   age sex   status    date_of_onset date_of_sample district chiefdom
   &lt;int&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;     &lt;date&gt;        &lt;date&gt;         &lt;fct&gt;    &lt;fct&gt;
 1     1    20 F     confirmed 2014-05-18    2014-05-23     Kailahun Kissi Teng
 2     2    42 F     confirmed 2014-05-20    2014-05-25     Kailahun Kissi Teng
 3     3    45 F     confirmed 2014-05-20    2014-05-25     Kailahun Kissi Tonge
 4     4    15 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 5     5    19 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 6     6    55 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 7     7    50 F     confirmed 2014-05-21    2014-05-26     Kailahun Kissi Teng
 8     8     8 F     confirmed 2014-05-22    2014-05-27     Kailahun Kissi Teng
 9     9    54 F     confirmed 2014-05-22    2014-05-27     Kailahun Kissi Teng
10    10    57 F     confirmed 2014-05-22    2014-05-27     Kailahun Kissi Teng
# ℹ 11,893 more rows</code></pre>
</div>
</div>
</div>
</div>
<div id="utiliza-el-paquete-incidence2-para-reordenar-tus-datos" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="utiliza-el-paquete-incidence2-para-reordenar-tus-datos" class="callout-inner">
<h3 class="callout-title">Utiliza el paquete incidence2 para reordenar tus datos</h3>
<div class="callout-content">
<p>Usando el paquete<a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a>, carga el listado de casos
“MERS” incluido en el objeto <code>mers_korea_2015</code>.</p>
<p>Reordena el listado de casos para que tenga la estructura de entrada
requerida por el paquete <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>.</p>
<p>Estima el HFR ajustado al retardo utilizando el retardo de
distribución correspondiente.</p>
</div>
</div>
</div>
<div id="accordionHint4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint4" aria-expanded="false" aria-controls="collapseHint4">
  <h4 class="accordion-header" id="headingHint4"> Dar una pista </h4>
</button>
<div id="collapseHint4" class="accordion-collapse collapse" aria-labelledby="headingHint4" data-bs-parent="#accordionHint4">
<div class="accordion-body">
<p><strong>¿Cómo reorganizar mis datos de entrada?</strong></p>
<p>Reorganizar los datos de entrada para el análisis de datos puede
llevarte la mayor parte del tiempo. Para estar listo para el análisis
con <em>datos de incidencia agregados</em> te animamos a utilizar
<a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a> ¡!</p>
<p>Primero, en la viñeta <a href="https://www.reconverse.org/incidence2/articles/incidence2.html" class="external-link">Inicio</a>
de <a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a> explora cómo utilizar
<code>date_index</code> al leer un listado de casos con fechas en varias
columnas.</p>
<p>A continuación, consulta la viñeta <a href="https://epiverse-trace.github.io/cfr/articles/data_from_incidence2.html" class="external-link">Manejo
de datos de <code>{incidence2}</code></a> del paquete
<a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a>, sobre cómo utilizar la función
<code>cfr::prepare_data()</code> con los objetos incidence2.</p>
<!-- cita la entrada howto one lineslist + incidencia2 + conexión cfr -->
</div>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10"> Mostrar la solución </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" aria-labelledby="headingSolution10" data-bs-parent="#accordionSolution10">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Carga los paquetes</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">outbreaks</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Accede a la distribución de retrasos temporales</span></span>
<span><span class="va">mers_delay</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epidist_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"mers"</span>,</span>
<span>    epi_dist <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>    single_epidist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Lee el listado de casos</span></span>
<span><span class="va">mers_korea_2015</span><span class="op">$</span><span class="va">linelist</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"dt_"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 162 × 6
   dt_onset   dt_report  dt_start_exp dt_end_exp dt_diag    dt_death
   &lt;date&gt;     &lt;date&gt;     &lt;date&gt;       &lt;date&gt;     &lt;date&gt;     &lt;date&gt;
 1 2015-05-11 2015-05-19 2015-04-18   2015-05-04 2015-05-20 NA
 2 2015-05-18 2015-05-20 2015-05-15   2015-05-20 2015-05-20 NA
 3 2015-05-20 2015-05-20 2015-05-16   2015-05-16 2015-05-21 2015-06-04
 4 2015-05-25 2015-05-26 2015-05-16   2015-05-20 2015-05-26 NA
 5 2015-05-25 2015-05-27 2015-05-17   2015-05-17 2015-05-26 NA
 6 2015-05-24 2015-05-28 2015-05-15   2015-05-17 2015-05-28 2015-06-01
 7 2015-05-21 2015-05-28 2015-05-16   2015-05-17 2015-05-28 NA
 8 2015-05-26 2015-05-29 2015-05-15   2015-05-15 2015-05-29 NA
 9 NA         2015-05-29 2015-05-15   2015-05-17 2015-05-29 NA
10 2015-05-21 2015-05-29 2015-05-16   2015-05-16 2015-05-29 NA
# ℹ 152 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Usa {incidence2} para contabilizar la incidencia diaria</span></span>
<span><span class="va">mers_incidence</span> <span class="op">&lt;-</span> <span class="va">mers_korea_2015</span><span class="op">$</span><span class="va">linelist</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># convertir a un objeto incidence2</span></span>
<span>  <span class="fu">incidence</span><span class="op">(</span>date_index <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"dt_onset"</span>, <span class="st">"dt_death"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># completa las fechas de la primera a la última</span></span>
<span>  <span class="fu">incidence2</span><span class="fu">::</span><span class="fu">complete_dates</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explora los resultados de incidence2</span></span>
<span><span class="va">mers_incidence</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># incidence:  72 x 3
# count vars: dt_death, dt_onset
   date_index count_variable count
   &lt;date&gt;     &lt;chr&gt;          &lt;int&gt;
 1 2015-05-11 dt_death           0
 2 2015-05-11 dt_onset           1
 3 2015-05-12 dt_death           0
 4 2015-05-12 dt_onset           0
 5 2015-05-13 dt_death           0
 6 2015-05-13 dt_onset           0
 7 2015-05-14 dt_death           0
 8 2015-05-14 dt_onset           0
 9 2015-05-15 dt_death           0
10 2015-05-15 dt_onset           0
# ℹ 62 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepara los datos {incidence2} para usarlos en {cfr}</span></span>
<span><span class="va">mers_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">prepare_data</span><span class="op">(</span></span>
<span>    cases_variable <span class="op">=</span> <span class="st">"dt_onset"</span>,</span>
<span>    deaths_variable <span class="op">=</span> <span class="st">"dt_death"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date deaths cases
1  2015-05-11      0     1
2  2015-05-12      0     0
3  2015-05-13      0     0
4  2015-05-14      0     0
5  2015-05-15      0     0
6  2015-05-16      0     0
7  2015-05-17      0     1
8  2015-05-18      0     1
9  2015-05-19      0     0
10 2015-05-20      0     5
11 2015-05-21      0     6
12 2015-05-22      0     2
13 2015-05-23      0     4
14 2015-05-24      0     2
15 2015-05-25      0     3
16 2015-05-26      0     1
17 2015-05-27      0     2
18 2015-05-28      0     1
19 2015-05-29      0     3
20 2015-05-30      0     5
21 2015-05-31      0    10
22 2015-06-01      2    16
23 2015-06-02      0    11
24 2015-06-03      1     7
25 2015-06-04      1    12
26 2015-06-05      1     9
27 2015-06-06      0     7
28 2015-06-07      0     7
29 2015-06-08      2     6
30 2015-06-09      0     1
31 2015-06-10      2     6
32 2015-06-11      1     3
33 2015-06-12      0     0
34 2015-06-13      0     2
35 2015-06-14      0     0
36 2015-06-15      0     1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estima el CFR ajustado a retrasos temporales</span></span>
<span><span class="va">mers_incidence</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">prepare_data</span><span class="op">(</span></span>
<span>    cases_variable <span class="op">=</span> <span class="st">"dt_onset"</span>,</span>
<span>    deaths_variable <span class="op">=</span> <span class="st">"dt_death"</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span>delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">mers_delay</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  severity_estimate severity_low severity_high
1            0.0907        0.042        0.4847</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="heterogeneidad-de-la-gravedad" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="heterogeneidad-de-la-gravedad" class="callout-inner">
<h3 class="callout-title">Heterogeneidad de la gravedad</h3>
<div class="callout-content">
<p>La CFR puede diferir entre poblaciones (por ejemplo, edad, espacio,
tratamiento); cuantificar estas heterogeneidades puede ayudar a dirigir
los recursos adecuadamente y a comparar distintos regímenes
asistenciales (<a href="https://royalsocietypublishing.org/doi/10.1098/rstb.2016.0371" class="external-link">Cori
et al., 2017</a>).</p>
<p>Utiliza la base de datos <code>cfr::covid_data</code> para estimar
una CFR ajustado al retraso temporal estratificada por países.</p>
</div>
</div>
</div>
<div id="accordionHint5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint5" aria-expanded="false" aria-controls="collapseHint5">
  <h4 class="accordion-header" id="headingHint5"> Dar una pista </h4>
</button>
<div id="collapseHint5" class="accordion-collapse collapse" aria-labelledby="headingHint5" data-bs-parent="#accordionHint5">
<div class="accordion-body">
<p>Una forma de hacer un <em>análisis estratificado</em> es aplicar un
modelo a datos anidados. Esta <a href="https://tidyr.tidyverse.org/articles/nest.html#nested-data-and-models" class="external-link">viñeta
<code>{tidyr}</code></a> te muestra cómo aplicar la función
<code>group_by()</code> + <code>nest()</code> a los datos anidados, y
luego <code>mutate()</code> + <code>map()</code> para aplicar el
modelo.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution11" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution11" aria-expanded="false" aria-controls="collapseSolution11">
  <h4 class="accordion-header" id="headingSolution11"> Mostrar la solución </h4>
</button>
<div id="collapseSolution11" class="accordion-collapse collapse" aria-labelledby="headingSolution11" data-bs-parent="#accordionSolution11">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_data</span> <span class="op">%&gt;%</span> <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 20,786
Columns: 4
$ date    &lt;date&gt; 2020-01-03, 2020-01-03, 2020-01-03, 2020-01-03, 2020-01-03, 2…
$ country &lt;chr&gt; "Argentina", "Brazil", "Colombia", "France", "Germany", "India…
$ cases   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ deaths  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">delay_onset_death</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">epidist_db</span><span class="op">(</span></span>
<span>    disease <span class="op">=</span> <span class="st">"covid"</span>,</span>
<span>    epi_dist <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>    single_epidist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">covid_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">nest</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    temp <span class="op">=</span></span>
<span>      <span class="fu">map</span><span class="op">(</span></span>
<span>        .x <span class="op">=</span> <span class="va">data</span>,</span>
<span>        .f <span class="op">=</span> <span class="fu">cfr</span><span class="fu">::</span><span class="va">cfr_static</span>,</span>
<span>        delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">density</span><span class="op">(</span><span class="va">delay_onset_death</span>, <span class="va">x</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unnest</span><span class="op">(</span>cols <span class="op">=</span> <span class="va">temp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 19 × 5
# Groups:   country [19]
   country        data     severity_estimate severity_low severity_high
   &lt;chr&gt;          &lt;list&gt;               &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
 1 Argentina      &lt;tibble&gt;            0.0133       0.0133        0.0133
 2 Brazil         &lt;tibble&gt;            0.0195       0.0195        0.0195
 3 Colombia       &lt;tibble&gt;            0.0225       0.0224        0.0226
 4 France         &lt;tibble&gt;            0.0044       0.0044        0.0044
 5 Germany        &lt;tibble&gt;            0.0045       0.0045        0.0045
 6 India          &lt;tibble&gt;            0.0119       0.0119        0.0119
 7 Indonesia      &lt;tibble&gt;            0.024        0.0239        0.0241
 8 Iran           &lt;tibble&gt;            0.0191       0.0191        0.0192
 9 Italy          &lt;tibble&gt;            0.0075       0.0075        0.0075
10 Mexico         &lt;tibble&gt;            0.0461       0.046         0.0462
11 Peru           &lt;tibble&gt;            0.0318       0.0151        0.202
12 Poland         &lt;tibble&gt;            0.0186       0.0186        0.0187
13 Russia         &lt;tibble&gt;            0.0182       0.0182        0.0182
14 South Africa   &lt;tibble&gt;            0.0254       0.0253        0.0255
15 Spain          &lt;tibble&gt;            0.0087       0.0087        0.0087
16 Turkey         &lt;tibble&gt;            0.006        0.006         0.006
17 Ukraine        &lt;tibble&gt;            0.0204       0.0203        0.0205
18 United Kingdom &lt;tibble&gt;            0.009        0.009         0.009
19 United States  &lt;tibble&gt;            0.0111       0.0111        0.0111</code></pre>
</div>
<p>¡Estupendo! Ahora puedes utilizar un código similar para cualquier
otro análisis estratificado, como la edad, las regiones u otros.</p>
<p>Pero, ¿cómo podemos interpretar que existe una variabilidad de
gravedad por países a partir del mismo patógeno diagnosticado?</p>
<p>Factores locales como la capacidad de análisis, la definición de caso
y el régimen de muestreo pueden afectar a la notificación de casos y
muertes, afectando así a la comprobación de los casos. Echa un vistazo a
la viñeta <a href="https://epiverse-trace.github.io/cfr/articles/estimate_ascertainment.html" class="external-link">Estimar
la proporción de casos que se determinan durante un brote</a> del
paquete <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> para más información ¡!</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="apéndice">Apéndice<a class="anchor" aria-label="anchor" href="#ap%C3%A9ndice"></a></h2>
<hr class="half-width"><p>El paquete <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> tiene una función llamada
<code>cfr_time_varying()</code> con una funcionalidad distinta de
<code>cfr_rolling()</code>.</p>
<div id="cuándo-utilizar-cfr_rolling" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="cuándo-utilizar-cfr_rolling" class="callout-inner">
<h3 class="callout-title">¿Cuándo utilizar cfr_rolling()?</h3>
<div class="callout-content">
<p><strong>cfr_rolling()</strong> muestra el CFR estimada en cada día
del brote, dado que los datos futuros sobre casos y muertes no están
disponibles en ese momento. El valor final de <em>cfr_rolling()</em>
estimado es idéntico al de <em>cfr_static()</em> con los mismos
datos.</p>
<p>Recuerda, como se muestra arriba <em>cfr_rolling()</em> es útil para
obtener estimaciones del CFR en las primeras fases y comprobar si la
estimación del CFR de un brote se ha estabilizado. Así,
<em>cfr_rolling()</em> no es sensible a la duración ni al tamaño de la
epidemia.</p>
</div>
</div>
</div>
<div id="cuándo-utilizar-cfr_time_varying" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="cuándo-utilizar-cfr_time_varying" class="callout-inner">
<h3 class="callout-title">¿Cuándo utilizar cfr_time_varying()?</h3>
<div class="callout-content">
<p>Por otra parte, <strong>cfr_time_varying()</strong> calcula el CFR a
lo largo de una ventana móvil y ayuda a comprender los cambios en el CFR
debidos a cambios en la epidemia, por ejemplo, debidos a una nueva
variante o a una mayor inmunidad por vacunación.</p>
<p>Sin embargo, <em>cfr_time_variying()</em> es sensible a la
incertidumbre del muestreo. Por tanto, es sensible al tamaño del brote.
Cuanto mayor sea el número de casos con resultados esperados en un día
determinado, más estimaciones razonables del CFR variable en el tiempo
obtendremos.</p>
<p>Por ejemplo, con 100 casos, la estimación del riesgo de mortalidad
tendrá, a grandes rasgos, un intervalo de confianza del 95% ±10% de la
estimación media (IC binomial). Por tanto, si tenemos &gt;100 casos con
resultados esperados <em>en un día determinado</em> podemos obtener
estimaciones razonables del CFR variable en el tiempo. Pero si sólo
tenemos &gt;100 casos <em>a lo largo de toda la epidemia</em>
probablemente tengamos que basarnos en <strong>cfr_rolling()</strong>
que utiliza los datos acumulados.</p>
<p>Te invitamos a leer esta <a href="https://epiverse-trace.github.io/cfr/articles/estimate_time_varying_severity.html" class="external-link">viñeta
sobre <code>cfr_time_varying()</code></a>.</p>
</div>
</div>
</div>
<div id="más-medidas-de-gravedad" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="más-medidas-de-gravedad" class="callout-inner">
<h3 class="callout-title">Más medidas de gravedad</h3>
<div class="callout-content">
<p>Supongamos que necesitamos evaluar la gravedad clínica de la epidemia
en un contexto distinto al de los datos de vigilancia, como la gravedad
entre los casos que llegan a los hospitales o los casos que recogiste en
una encuesta serológica representativa.</p>
<p>Utilizando <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> podemos cambiar las entradas para el
numerador <strong>casos</strong> (<code>cases</code>) y el denominador
<strong>muertes</strong> (<code>deaths</code>) para estimar más medidas
de gravedad, como el Riesgo de Fatalidad por Infección (RFI) o el Riesgo
de Fatalidad por Hospitalización (RFH). Podemos seguir esta
analogía:</p>
</div>
</div>
</div>
<div id="accordionSolution12" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution12" aria-expanded="false" aria-controls="collapseSolution12">
  <h4 class="accordion-header" id="headingSolution12"> Riesgo de mortalidad por infección y hospitalización </h4>
</button>
<div id="collapseSolution12" class="accordion-collapse collapse" aria-labelledby="headingSolution12" data-bs-parent="#accordionSolution12">
<div class="accordion-body">
<p>Si para la una <em>probabilidad de muerte</em> (CFR o CFR en inglés),
exigimos:</p>
<ul><li>
<em>Incidencia</em> de casos y muertes, con una:</li>
<li>Distribución de retraso temporal entre casos y muertes (o una
aproximación cercana, como el tiempo entre inicio de los síntomas y la
muerte).</li>
</ul><p>Entonces, el <em>Riesgo de Fatalidad por Infección</em> (IFR, por sus
siglas en inglés) requiere:</p>
<ul><li>Incidencia de <em>infecciones</em> y muertes, con una:</li>
<li>Distribución de retraso temporal desde la infección hasta la muerte
(o una aproximación cercana).</li>
</ul><p>Del mismo modo, el <em>Riesgo de Fatalidad por Hospitalización</em>
(HFR) requiere:</p>
<ul><li>Incidencia de <em>hospitalizaciones</em> y muertes, y una:</li>
<li>Distribución del retraso temporal entre la hospitalización y la
muerte.</li>
</ul></div>
</div>
</div>
</div>
<div id="accordionSolution13" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution13" aria-expanded="false" aria-controls="collapseSolution13">
  <h4 class="accordion-header" id="headingSolution13"> Fuentes de datos para más medidas de gravedad </h4>
</button>
<div id="collapseSolution13" class="accordion-collapse collapse" aria-labelledby="headingSolution13" data-bs-parent="#accordionSolution13">
<div class="accordion-body">
<p><a href="https://www.nature.com/articles/s41467-020-19238-2/figures/1" class="external-link">Yang
et al., 2020</a> resume diferentes definiciones y fuentes de datos:</p>
<figure><img src="../fig/cfr-s41467-020-19238-2-fig_a.png" alt="Niveles de gravedad de las infecciones por SRAS-CoV-2 y parámetros de interés. Se supone que cada nivel es un subconjunto del nivel inferior." class="figure mx-auto d-block"><div class="figcaption">Niveles de gravedad de las infecciones por
SRAS-CoV-2 y parámetros de interés. Se supone que cada nivel es un
subconjunto del nivel inferior.</div>
</figure><ul><li>sCFR riesgo sintomático de muerte,</li>
<li>sCHR riesgo sintomático de hospitalización,</li>
<li>mCFR riesgo de caso-fatalidad médicamente atendido,</li>
<li>mCHR riesgo de hospitalización de casos atendidos médicamente,</li>
<li>HFR riesgo de hospitalización-fatalidad.</li>
</ul><figure><img src="../fig/cfr-s41467-020-19238-2-fig_b.png" alt="Diagrama esquemático de los análisis de referencia. Las flechas rojas, azules y verdes indican el flujo de datos desde los casos confirmados por laboratorio de la vigilancia pasiva, los casos diagnosticados clínicamente y los casos confirmados por laboratorio de los cribados activos." class="figure mx-auto d-block"><div class="figcaption">Diagrama esquemático de los análisis de
referencia. Las flechas rojas, azules y verdes indican el flujo de datos
desde los casos confirmados por laboratorio de la vigilancia pasiva, los
casos diagnosticados clínicamente y los casos confirmados por
laboratorio de los cribados activos.</div>
</figure></div>
</div>
</div>
</div>
<div id="discussion5" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>Basándote en tu experiencia:</p>
<ul><li>Comparte algún brote anterior en el que hayas participado en su
respuesta.</li>
</ul><p>Responde a estas preguntas:</p>
<ul><li>¿Cómo evaluaste la gravedad clínica del brote?</li>
<li>¿Cuáles fueron las principales fuentes de sesgo?</li>
<li>¿Qué hiciste para tener en cuenta el sesgo identificado?</li>
<li>¿Qué análisis complementario harías para resolver el sesgo?</li>
</ul></div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul><li><p>Utiliza <a href="https://github.com/epiverse-trace/cfr" class="external-link">cfr</a> para estimar la gravedad</p></li>
<li><p>Utiliza <code>cfr_static()</code> para estimar el CFR global con
los últimos datos disponibles.</p></li>
<li><p>Utiliza <code>cfr_rolling()</code> para mostrar cuál sería el CFR
estimada en cada día del brote.</p></li>
<li><p>Utiliza la <code>delay_density</code> para ajustar el CFR según
la distribución de retrasos correspondiente.</p></li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Capítulo previo y siguiente"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/create-forecast.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="../instructor/superspreading-estimate.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/create-forecast.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: Crear una previsión
        </a>
        <a class="chapter-link float-end" href="../instructor/superspreading-estimate.html" rel="next">
          Siguiente: Account for...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>Esta lección está sujeta al <a href="CODE_OF_CONDUCT.html">Código de Conducta</a></p>
        <p>

        <a href="https://github.com/epiverse-trace/tutorials-middle/edit/main/episodes/severity-static.Rmd" class="external-link">Editar en GitHub</a>

	
        | <a href="https://github.com/epiverse-trace/tutorials-middle/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a>
        | <a href="https://github.com/epiverse-trace/tutorials-middle/" class="external-link">Fuente</a></p>
				<p><a href="https://github.com/epiverse-trace/tutorials-middle/blob/main/CITATION" class="external-link">Cita</a> | <a href="mailto:andree.valle-campos@lshtm.ac.uk">Contacto</a> | <a href="https://carpentries.org/about/" class="external-link">Acerca de</a></p>
			</div>
			<div class="col-md-6">

        <p>Materiales bajo la <a href="LICENSE.html">CC-BY 4.0</a> por las autoras</p>

        <p>Plantilla compartida bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> por <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construido con <a href="https://github.com/epiverse-trace/sandpaper/tree/patch-renv-github-bug" class="external-link">sandpaper (0.16.9)</a>, <a href="https://github.com/carpentries/pegboard/tree/main" class="external-link">pegboard (0.7.6)</a> y <a href="https://github.com/epiverse-trace/varnish/tree/epiversetheme" class="external-link">varnish (1.0.5.9000)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Volver al inicio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Volver</span> al inicio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://epiverse-trace.github.io/tutorials-middle/instructor/severity-static.html",
  "inLanguage": "es",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "forecasts, epidemic models, interventions",
  "name": "Estimación de la severidad del brote",
  "creativeWorkStatus": "active",
  "url": "https://epiverse-trace.github.io/tutorials-middle/instructor/severity-static.html",
  "identifier": "https://epiverse-trace.github.io/tutorials-middle/instructor/severity-static.html",
  "dateCreated": "2024-11-05",
  "dateModified": "2024-11-05",
  "datePublished": "2024-11-05"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

